<div class="pdp-footer">
  {% if section.settings.heading %}
    <div class="pdp-footer__heading sans-serif-uppercase-l text-center">
      {{ section.settings.heading }}
    </div>
  {% endif %}
  <div class="pdp-footer__blocks">
    {% for block in section.blocks %}
      <div class="pdp-footer__block">
        {% assign image = block.settings.image %}

        {% if image == blank %}
          {% if block.type == 'product' %}
            {% assign image = all_products[block.settings.product].featured_image %}
          {% elsif block.type == 'collection' %}
            {% assign image = collections[block.settings.collection].image %}
          {% endif %}
        {% endif %}

        {% include 'responsive-image' with
          image: image,
          max_width: 300,
          aspect_ratio: 1,
          image_class: "pdp-footer__image",
          wrapper_class: "pdp-footer__image-wrapper"
        %}
        <div class="pdp-footer__text text-center sans-serif-uppercase-m">
          {{ block.settings.text }}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% schema %}
  {
    "name": "Featured Links",
    "max_blocks": 6,
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading"
      }
    ],
    "blocks": [
      {
        "type": "product",
        "name": "Product",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "product",
            "id": "product",
            "label": "Product"
          },
          {
            "type": "text",
            "id": "text",
            "label": "Text"
          }
        ]
      },
      {
        "type": "collection",
        "name": "Collection",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "collection",
            "id": "collection",
            "label": "Collection"
          },
          {
            "type": "text",
            "id": "text",
            "label": "Text"
          }
        ]
      }
    ]
  }
{% endschema %}